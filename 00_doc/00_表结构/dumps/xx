CREATE VIEW `v_org_relation` AS
SELECT
	t.*
FROM
	(
	SELECT subt2.serial_id AS parent_serial_id,
       subt2.serial_type AS parent_serial_type,
       subt3.name AS parent_name,
       subt3.simple_name AS parent_simple_name,
       subt4.label AS parent_type_text,
       subt1.id AS id,
       subt1.parent_id AS parent_id,
       subt1.tenant_id AS tenant_id,
       subt1.serial_id AS serial_id,
       subt1.serial_type AS serial_type,
       subt1.type AS type,
       subt1.code AS code,
       subt1.son_count AS son_count,
       subt1.c_id AS c_id,
       subt1.c_time AS c_time,
       subt1.u_id AS u_id,
       subt1.u_time AS u_time,
       subt1.dbversion AS dbversion
FROM m_org subt1
	LEFT JOIN m_org subt2 ON subt1.parent_id = subt2.id
	LEFT JOIN (
		SELECT tab1.id AS serial_id, tab1.name AS name, tab1.simple_name AS simple_name, '10' AS type, 's_tenant' AS serial_type
		FROM s_tenant tab1
		UNION ALL
		SELECT tab2.id AS serial_id, tab2.name AS name, tab2.simple_name AS simple_name, '20' AS type, 'm_group' AS serial_type
		FROM m_group tab2
		UNION ALL
		SELECT tab3.id AS serial_id, tab3.name AS name, tab3.simple_name AS simple_name, '30' AS type, 'm_company' AS serial_type
		FROM m_company tab3
		UNION ALL
		SELECT tab4.id AS serial_id, tab4.name AS name, tab4.simple_name AS simple_name, '40' AS type, 'm_dept' AS serial_type
		FROM m_dept tab4
		UNION ALL
		SELECT tab5.id AS serial_id, tab5.name AS name, tab5.simple_name AS simple_name, '50' AS type, 'm_position' AS serial_type
		FROM m_position tab5
		UNION ALL
		SELECT tab6.id AS serial_id, tab6.name AS name, tab6.simple_name AS simple_name, '60' AS type, 'm_staff' AS serial_type
		FROM m_staff tab6
	) subt3
	ON subt3.serial_type = subt2.serial_type
		AND subt3.serial_id = subt2.serial_id
	LEFT JOIN v_dict_info subt4
	ON subt4.dict_value = subt2.type
		AND subt4.code = 'org_setting_type'
	) t